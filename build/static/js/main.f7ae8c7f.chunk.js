(this["webpackJsonpfinancial-react"]=this["webpackJsonpfinancial-react"]||[]).push([[0],{167:function(e,t,a){e.exports=a(351)},172:function(e,t,a){},173:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(51),i=a.n(c),r=(a(172),a(37)),s=a(23),l=a(24),m=a(29),u=a(30),d=(a(173),a(12));function p(e){return o.a.createElement("div",null,o.a.createElement(d.d,{width:600,height:400,data:e.datistock,margin:{top:45,right:30,left:30,bottom:5}},o.a.createElement(d.g,{dataKey:"datetime"}),o.a.createElement(d.h,{domain:[function(e){return(e-2*e/100).toFixed(2)},function(e){return(e+2*e/100).toFixed(2)}]}),o.a.createElement(d.a,{strokeDasharray:"3 3"}),o.a.createElement(d.f,null),o.a.createElement(d.b,null),o.a.createElement(d.e,{y:2500,label:"",stroke:"red"}),o.a.createElement(d.c,{type:"monotone",dataKey:"price",stroke:"#8884d8"})))}var f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).aggiornoStock=function(){n.setState((function(e,t){return{price:e.price+10}}))},n.eliminoStock=function(){n.props.eliminoStock(n.props.datistock.id)},n.getNewPrice=function(){console.log("richiesta nuovo prezzo");var e=new URL("https://intraday.worldtradingdata.com/api/v1/intraday"),t={symbol:n.state.symbol,api_token:"hOxKBC7K2lnyVNgfAdXOar5BqI1XHXtUepjtwYj9crlH7d4pqNnFdn65tu0B",interval:"1",range:"1"};Object.keys(t).forEach((function(a){return e.searchParams.append(a,t[a])})),fetch(e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.intraday,a=Object.entries(t)[0],o=a[0],c=a[1].open,i=[].concat(Object(r.a)(n.state.datigrafico),[{datetime:o.substr(11),price:c}]);n.setState({price:c,datatrade:o,datigrafico:i})})).catch((function(e){console.log("Fetch fallita",e)}))},n.startRealTime=function(){console.log("start real time "),n.timer=setInterval((function(){return n.getNewPrice()}),6e4)},n.stopRealTime=function(){console.log("stop real time"),clearInterval(n.timer)},n.startStopRealTime=function(){var e="checked"===n.state.ckrealtime?"":"checked";"checked"===e?n.startRealTime():n.stopRealTime(),n.setState({ckrealtime:e})},n.componentWillUnmount=function(){n.stopRealTime()},n.showGrafico=function(){n.setState({showGrafico:!n.state.showGrafico})};var o=n.props.datistock,c=o.symbol,i=o.price,l=o.mercato;return n.state={symbol:c,price:i,mercato:l,datatrade:"XXXX-XX-XX 16:00:00",ckrealtime:"",datigrafico:[{datetime:"16:00:00",price:i}],showGrafico:!1},console.log("1f) FIGLIO - Creo istanza "+c),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("3 f) Figlio did mount "+this.props.datistock.symbol)}},{key:"componentDidUpdate",value:function(e,t){console.log("4 f) Figlio did update "+this.props.datistock.symbol),e.datistock.price!==this.props.datistock.price&&this.setState((function(e,t){return{price:t.datistock.price}}))}},{key:"render",value:function(){var e=this.state.price>280?"giallo":"verde";console.log("2 f) Figlio render "+this.props.datistock.symbol);var t=(this.state.price-this.props.datistock.price).toFixed(2),a=this.props.datistock.price?(t/this.props.datistock.price*100).toFixed(1):"-";return o.a.createElement("div",{className:"col-lg-6  col-xs-12  mt-4  "},o.a.createElement("div",{className:"bodyStock"},o.a.createElement("div",{className:"gray m1 p3"},o.a.createElement("i",{className:"material-icons closebtn pointer",onClick:this.eliminoStock},"clear"),o.a.createElement("div",{className:"row "},o.a.createElement("div",{className:"col-lg-3   text-center"},o.a.createElement("h3",{className:e},this.props.datistock.symbol),o.a.createElement("p",null,this.props.mercato)),o.a.createElement("div",{className:"col-lg-3   text-center"},o.a.createElement("h3",null,this.state.price),o.a.createElement("p",null,this.state.datatrade.substr(11))),o.a.createElement("div",{className:"col-lg-3   text-center"},o.a.createElement("h3",null,a," %"),o.a.createElement("p",null,t)),o.a.createElement("div",{className:"col-lg-3   "},o.a.createElement("i",{className:"material-icons pointer",onClick:this.showGrafico},"trending_up"),o.a.createElement("div",{className:"custom-control custom-switch"},o.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitch1",checked:this.state.ckrealtime}),o.a.createElement("label",{className:"custom-control-label pointer",for:"customSwitch1",onClick:this.startStopRealTime})))))),o.a.createElement("div",{className:"bodyGrafico"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},this.state.showGrafico&&o.a.createElement(p,{datistock:this.state.datigrafico})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.datistock.price!==t.price&&e.datistock.symbol!==t.symbol?{symbol:e.datistock.symbol,price:e.datistock.price}:null}}]),a}(n.Component),h=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onInputChange=function(e){n.setState({campoRicerca:e.target.value})},n.onFocus=function(e){e.target.blur()},n.invioForm=function(e){e.preventDefault(),n.props.onInputSearch(n.state.campoRicerca),n.setState({campoRicerca:""})},n.state={campoRicerca:""},n}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 d-flex align-itmes-center justify-content-center"},o.a.createElement("form",{className:"form-inline mb-2",onSubmit:this.invioForm},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-control",type:"text",name:"cerca",value:this.state.campoRicerca,onChange:this.onInputChange})),o.a.createElement("button",{className:"btn btn-primary ml-2",onFocus:this.onFocus},"Ok"))))}}]),a}(n.Component);function E(e){return o.a.createElement("div",{className:"nomestock",onClick:function(){e.onAddPreferiti(e.id)}},o.a.createElement("i",{className:"material-icons"},"add"),o.a.createElement("p",null,e.datistock.symbol," - ",e.datistock.name))}var g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).aggiornoStock=function(){n.setState({listastock:[{nome:"AMAZON",quotazione:500}]})},n.componentWillUnmount=function(){console.log("5g) componente app distrutto ")},n.getElementi=function(e){n.setState({inCaricamento:!0,showError:!1});var t=new URL("https://api.worldtradingdata.com/api/v1/stock"),a={symbol:e,api_token:"hOxKBC7K2lnyVNgfAdXOar5BqI1XHXtUepjtwYj9crlH7d4pqNnFdn65tu0B "};Object.keys(a).forEach((function(e){return t.searchParams.append(e,a[e])})),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.data,a=t[0],o=a.stock_exchange_short;console.log(a),console.log(o),console.log("Recupero dati "+JSON.stringify(t)),n.setState((function(e){return{listaelementi:[].concat(Object(r.a)(e.listaelementi),[a])}})),n.setState({inCaricamento:!1,mercato:o})})).catch((function(e){console.log("Fetch fallita",e),n.setState({inCaricamento:!1,showError:!0,msgError:e.message})}))},n.onAddPreferiti=function(e){var t=n.state.listaelementi[e],a=n.state.cont+1;t.id=a,n.setState({listaPreferiti:[].concat(Object(r.a)(n.state.listaPreferiti),[t]),cont:a})},n.elimino=function(e){if(console.log("elimina"),e){var t=n.state.listaPreferiti.filter((function(t){return t.id!==e}));n.setState({listaPreferiti:t})}},n.cercaElementi=function(e){alert("stai cercando "+e)},n.state={listastock:[{nome:"APPL",quotazione:250}],listaelementi:[],listaPreferiti:[],inCaricamento:!1,showError:!1,msgError:null,mercato:"",cont:0},console.log("1g) GENITORE creo istanza"),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("3g) GENITORE Did Mount");var e=[{nome:"APPL",quotazione:350},{nome:"GOOGLE",quotazione:67}];this.setState((function(t,a){return{listastock:e}}))}},{key:"render",value:function(){var e=this;return console.log(this.state),console.log("2g) GENITORE render"),o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 text-center mt-4"},o.a.createElement("h3",null,"Applicazione Stock Quote "),o.a.createElement(h,{onInputSearch:this.getElementi}),this.state.showError&&o.a.createElement("p",null,this.state.msgError),this.state.inCaricamento&&o.a.createElement("p",null,"In Caricamento"),o.a.createElement("button",{className:"btn btn-success",onClick:this.aggiornoStock},"Top Stock"))),o.a.createElement("div",{className:"container"},o.a.createElement("section",{className:"listastock"},o.a.createElement("div",{className:"row mt-4"},this.state.listaelementi.map((function(t,a){return o.a.createElement(E,{datistock:t,key:t.symbol,id:a,onAddPreferiti:function(){return e.onAddPreferiti(a)}})})))),o.a.createElement("section",{className:"listapreferiti"},o.a.createElement("div",{className:"row mt-4"},this.state.listaPreferiti.map((function(t,a){return o.a.createElement(f,{datistock:t,key:t.id,eliminoStock:e.elimino,mercato:e.state.mercato})}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[167,1,2]]]);
//# sourceMappingURL=main.f7ae8c7f.chunk.js.map